// Generated by CoffeeScript 1.3.3
(function() {

  define(['backbone', 'i18n!app/nls/strings'], function(Backbone, __) {
    var CONTENT_PREFIX, WORKSPACE_PREFIX, models;
    models = {};
    CONTENT_PREFIX = '/module/';
    WORKSPACE_PREFIX = '/workspace/';
    models.Content = Backbone.Model.extend({
      defaults: {
        title: __('Untitled'),
        subjects: [],
        keywords: [],
        authors: [],
        copyrightHolders: [],
        language: navigator ? (navigator.userLanguage || navigator.language || 'en').toLowerCase() : 'en'
      },
      url: function() {
        if (this.get('id')) {
          return "" + CONTENT_PREFIX + (this.get('id'));
        } else {
          return CONTENT_PREFIX;
        }
      },
      validate: function(attrs) {
        var isEmpty;
        isEmpty = function(str) {
          return str && !str.trim().length;
        };
        if (isEmpty(attrs.body)) {
          return 'ERROR_EMPTY_BODY';
        }
        if (isEmpty(attrs.title)) {
          return 'ERROR_EMPTY_TITLE';
        }
        if (attrs.title === __('Untitled')) {
          return 'ERROR_UNTITLED_TITLE';
        }
      }
    });
    models.SearchResultItem = Backbone.Model.extend({
      defaults: {
        type: 'BUG_UNSPECIFIED_TYPE',
        title: 'BUG_UNSPECIFIED_TITLE'
      }
    });
    models.Workspace = Backbone.Collection.extend({
      model: models.SearchResultItem,
      url: WORKSPACE_PREFIX
    });
    return models;
  });

}).call(this);
